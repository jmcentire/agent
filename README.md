# Agent - AI-Powered Shell Assistant

**Author:** [Your Name/Handle Here]
**Version:** [e.g., 0.4.0]
**Date:** 2025-04-04

## ⚠️ EXTREME DANGER WARNING ⚠️

**THIS SCRIPT EXECUTES ARBITRARY LINUX COMMANDS GENERATED BY AN ARTIFICIAL INTELLIGENCE (OpenAI API). USE WITH EXTREME CAUTION AND AT YOUR OWN RISK.**

* **HIGH RISK:** The AI might generate unexpected, incorrect, or malicious commands.
* **DATA LOSS:** Executing commands could lead to accidental deletion or modification of files and system settings.
* **SYSTEM DAMAGE:** Improper commands could potentially damage your operating system or configuration.
* **SECURITY VULNERABILITY:** Generated commands might inadvertently expose sensitive information or create security holes.
* **UNINTENDED COSTS:** Each command execution involves calls to the OpenAI API, which may incur costs depending on your usage and plan.

**DO NOT run this script:**
* On systems with sensitive data.
* In production environments.
* With elevated privileges (root/sudo) unless you fully understand the implications and risks of the specific command being generated and have explicitly confirmed its execution.

**You are solely responsible for any consequences resulting from the execution of commands generated by this script.** By default, the script **requires user confirmation** before running any command. However, this confirmation can be disabled (`--confirm=off` or `set confirmation=off`), significantly increasing the risk. Always understand the command before confirming or disabling the safety check.

---

## Description

`agent` is an experimental, interactive Bash shell assistant that leverages the OpenAI API (specifically models like GPT-4 Turbo) to interpret natural language goals and translate them into Linux commands.

It attempts to provide a conversational way to perform command-line tasks. Crucially, it includes a **default confirmation step** before executing any AI-generated command and uses enhanced prompting to guide the AI towards safer command generation, although fundamental risks remain due to the nature of executing generated code.

## Features

* **Interactive Shell Interface:** Provides an `agent:` prompt for entering goals.
* **Natural Language Interpretation:** Uses the OpenAI API to understand user goals.
* **Command Generation:** Translates goals into single-line Linux bash commands or pipelines.
* **Toggleable Confirmation Step (Default: ON):** Requires explicit user confirmation (`y/N`) before executing the generated command, acting as a critical safety check.
    * Start with `--confirm=off` to disable this safety check (auto-execution).
    * Toggle interactively with `set confirmation=on` / `set confirmation=off`.
* **Toggleable Debug/Verbose Mode:** Provides detailed insight into the script's operations (API calls, extracted commands, status messages).
    * Start with `-v`, `--verbose`, or `--debug=on`.
    * Toggle interactively with `set debug=on` / `set debug=off`.
* **Enhanced Safety Prompting:** Attempts to guide the AI away from inherently dangerous operations on a live system (e.g., `fsck` on mounted partitions, broad `rm -rf`). *This is a guideline for the AI and not a foolproof guarantee.*
* **Session Logging:** Records all actions, goals, generated commands, and status messages to a timestamped file in the `~/.local/share/agent/logs/` directory (attempts to create the directory if needed).

## Prerequisites

Before running `agent`, ensure you have the following:

1.  **Linux Environment:** A standard Linux system with `bash`.
2.  **`curl`:** The command-line tool for transferring data with URLs. Install via your package manager (e.g., `sudo apt install curl` or `sudo yum install curl`).
3.  **`jq`:** A lightweight command-line JSON processor. Install via your package manager (e.g., `sudo apt install jq` or `sudo yum install jq`).
4.  **OpenAI API Key:** You need an API key from OpenAI. Obtain one at [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys).
5.  **OpenAI Account:** Your OpenAI account must be set up for API usage (which may involve setting up billing).

## Installation & Setup

1.  **Get the Script:**
    * Clone this repository: `git clone <repository_url>`
    * OR save the latest script code directly into a file named `agent`.

2.  **Make Executable:**
    ```bash
    chmod +x agent
    ```

3.  **Set API Key:**
    The script requires your OpenAI API key in the `OPENAI_API_KEY` environment variable.
    * **Temporary:** `export OPENAI_API_KEY="your_openai_api_key_here"`
    * **Persistent:** Add the `export` line to `~/.bashrc` or `~/.zshrc` (consider security implications) and run `source ~/.bashrc` or restart your shell.

## Usage

1.  **Start the Agent:**
    Navigate to the directory containing the `agent` script and run:
    ```bash
    ./agent [options]
    ```

2.  **Command-Line Options:**
    * `./agent`: Starts in default mode (quiet output, confirmation required).
    * `-v`, `--verbose`, `--debug=on`: Starts in verbose/debug mode.
    * `--debug=off`: Starts explicitly in quiet mode.
    * `--confirm=on`: Starts explicitly with confirmation required (default).
    * `--confirm=off`: Starts with confirmation **disabled** (auto-executes commands - **Use with extreme caution!**).
    * Options can be combined (e.g., `./agent -v --confirm=off`).

3.  **Interactive Shell:**
    You will see the `agent:` prompt. Type your goal and press Enter.
    *Example Goals:*
    ```
    agent: list files including hidden ones sorted by modification date
    agent: what is my current public ip?
    agent: count lines in all *.py files in the current directory
    ```
    If confirmation is ON (default), the script will show the proposed command and ask for confirmation (`[y/N]`) before executing.

4.  **Toggling Modes Interactively:**
    While the agent is running, type these commands at the prompt:
    * `set debug=on`: Enable verbose output.
    * `set debug=off`: Disable verbose output.
    * `set confirmation=on`: Require confirmation before execution.
    * `set confirmation=off`: Disable confirmation (auto-execute - **Use with extreme caution!**).

5.  **Exiting:**
    Type `exit`, `quit`, or press `Ctrl+D`.

## Configuration

* **API Key:** Set via the `OPENAI_API_KEY` environment variable (required).
* **AI Model:** Change the `MODEL` variable inside the script (default: `gpt-4-turbo-preview`).
* **Log Location:** Logs are stored in `~/.local/share/agent/logs/`. The script attempts to create this directory.

## Potential Future Enhancements

* Configuration file (`~/.config/agent/config`) for easier settings management.
* Command execution timeout (`timeout` command).
* More granular context awareness (remembering previous commands/outputs).
* Implementing a more complex interactive mode where the AI can request specific actions (`[CMD: ...]`) iteratively to solve multi-step problems (requires significant script changes).

**Disclaimer:** This script is provided "as-is" without warranty of any kind. Use responsibly and understand the risks.
